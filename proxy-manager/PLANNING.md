# Proxy Manager - 代理管理脚本规划

## 项目概述

一个简单易用的 sing-box/xray 管理脚本，针对个人使用习惯定制。

## 🎯 设计目标

- **简单易用** - 交互式菜单，一键操作
- **轻量级** - 适合小鸡部署
- **个性化** - 根据使用习惯定制
- **安全可靠** - 自动备份配置
- **多协议** - 支持主流协议

## 📋 功能规划

### 核心功能

#### 1. 协议支持
- [ ] VLESS + Reality
- [ ] VMess
- [ ] Trojan
- [ ] Shadowsocks
- [ ] Hysteria2
- [ ] TUIC

#### 2. 管理功能
- [ ] 一键安装/卸载
- [ ] 启动/停止/重启
- [ ] 查看状态
- [ ] 查看日志
- [ ] 配置备份/恢复
- [ ] 更新内核

#### 3. 配置管理
- [ ] 添加/删除用户
- [ ] 修改端口
- [ ] 修改协议
- [ ] 生成分享链接
- [ ] 生成订阅链接
- [ ] 批量导入/导出

#### 4. 监控功能
- [ ] 流量统计
- [ ] 连接数统计
- [ ] 性能监控
- [ ] 告警通知

#### 5. 安全功能
- [ ] 自动续签证书
- [ ] 防火墙配置
- [ ] 端口扫描防护
- [ ] 流量伪装

### 高级功能

#### 1. 多用户管理
- [ ] 用户分组
- [ ] 流量限制
- [ ] 到期时间
- [ ] 用户统计

#### 2. 负载均衡
- [ ] 多节点管理
- [ ] 自动切换
- [ ] 健康检查

#### 3. 自动化
- [ ] 定时任务
- [ ] 自动备份
- [ ] 自动更新
- [ ] 自动清理日志

## 🏗️ 技术架构

### 脚本结构
```
proxy-manager/
├── proxy.sh              # 主脚本（交互式菜单）
├── lib/
│   ├── install.sh       # 安装模块
│   ├── config.sh        # 配置管理
│   ├── user.sh          # 用户管理
│   ├── monitor.sh       # 监控模块
│   └── utils.sh         # 工具函数
├── templates/
│   ├── vless.json       # VLESS 配置模板
│   ├── vmess.json       # VMess 配置模板
│   └── ...
├── config/
│   ├── proxy.conf       # 主配置
│   └── users.db         # 用户数据库（SQLite）
└── README.md
```

### 数据存储
- 配置文件：JSON
- 用户数据：SQLite（轻量级）
- 日志：文本文件（自动轮转）

## 🎨 用户界面

### 主菜单
```
╔════════════════════════════════════════╗
║       Proxy Manager v1.0               ║
╚════════════════════════════════════════╝

  服务状态: ● 运行中 | 用户: 3 | 流量: 1.2GB

  1. 协议管理
  2. 用户管理
  3. 配置管理
  4. 监控统计
  5. 系统设置
  6. 备份恢复
  0. 退出

  请选择 [0-6]:
```

### 协议管理菜单
```
╔════════════════════════════════════════╗
║           协议管理                     ║
╚════════════════════════════════════════╝

  当前协议: VLESS + Reality
  端口: 443 | 用户数: 3

  1. 切换协议
  2. 修改端口
  3. 生成分享链接
  4. 生成订阅链接
  5. 查看配置
  0. 返回

  请选择 [0-5]:
```

## 💡 个性化定制点

### 1. 快捷操作
- 一键生成分享链接（带二维码）
- 一键添加用户（自动生成 UUID）
- 一键备份配置

### 2. 智能提示
- 端口冲突检测
- 配置错误提示
- 性能优化建议

### 3. 便捷功能
- 配置模板库
- 常用配置快速切换
- 批量操作支持

### 4. 安全增强
- 配置加密存储
- 操作日志记录
- 异常流量告警

## 📊 技术选型

### 核心引擎
- **sing-box** - 推荐（更现代，性能好）
- **xray** - 备选（生态成熟）

### 脚本语言
- **Shell** - 主脚本
- **Python** - 复杂逻辑（可选）

### 依赖工具
- `jq` - JSON 处理
- `sqlite3` - 数据库
- `qrencode` - 二维码生成
- `curl` - 网络请求

## 🚀 开发计划

### Phase 1: MVP（最小可用版本）
- [ ] 基础安装/卸载
- [ ] VLESS + Reality 支持
- [ ] 简单用户管理
- [ ] 交互式菜单
- [ ] 配置备份

**预计时间：** 2-3 天

### Phase 2: 功能完善
- [ ] 多协议支持
- [ ] 流量统计
- [ ] 订阅链接
- [ ] 自动更新
- [ ] 监控告警

**预计时间：** 3-5 天

### Phase 3: 高级功能
- [ ] 多用户管理
- [ ] 负载均衡
- [ ] Web 面板（可选）
- [ ] API 接口

**预计时间：** 5-7 天

## 📝 参考资源

### 官方文档
- sing-box: https://sing-box.sagernet.org/
- xray: https://xtls.github.io/

### 优秀脚本参考
- 3x-ui: https://github.com/MHSanaei/3x-ui
- sing-box-install: https://github.com/fscarmen/sing-box
- xray-script: https://github.com/XTLS/Xray-install

### 协议文档
- VLESS: https://github.com/XTLS/Xray-core
- Reality: https://github.com/XTLS/REALITY

## 🎯 差异化优势

相比现有脚本，我们的优势：

1. **极简设计** - 只保留常用功能
2. **个性化** - 根据使用习惯定制
3. **轻量级** - 适合小鸡
4. **交互友好** - TUI 菜单
5. **安全可靠** - 自动备份
6. **易于维护** - 模块化设计

## 💭 待讨论问题

1. **优先支持哪个协议？**
   - VLESS + Reality（推荐，最新）
   - VMess（兼容性好）
   - Trojan（简单）

2. **是否需要 Web 面板？**
   - 优点：直观易用
   - 缺点：增加复杂度

3. **用户数据存储方式？**
   - SQLite（推荐）
   - JSON 文件
   - 纯文本

4. **是否支持多节点？**
   - 单节点（简单）
   - 多节点（复杂但实用）

## 📌 备注

- 这是一个长期项目，可以慢慢完善
- 优先实现核心功能，高级功能可选
- 保持代码简洁，易于维护
- 注重用户体验和安全性

---

**创建时间：** 2026-02-27  
**状态：** 规划中  
**优先级：** 中等（有时间再做）

_由 22 和 11 共同规划_ 🌸
